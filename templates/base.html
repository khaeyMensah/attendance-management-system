{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{% block title %}ClassMark — QR Attendance{% endblock title %}</title>

    {% tailwind_css %}
    {% block stylesheet %}{% endblock stylesheet %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
  </head>

  <body class="min-h-screen flex flex-col font-sans bg-gradient-to-b from-white via-slate-50 to-slate-100 text-slate-800">
    {% block body %}
    <!-- Top navigation -->
    <header class="sticky top-0 z-40 border-b bg-white/75 backdrop-blur">
      <div class="{% block main_nav %} max-w-6xl px-4 mx-auto sm:px-6 lg:px-8 {% endblock main_nav %}">
        <div class="flex items-center justify-between h-16">
          <div class="flex items-center gap-4">
            {% if user.is_authenticated %}
              {% if user.role == 'student' %}
                <a href="{% url 'users:student_dashboard' %}" class="flex items-center gap-3" aria-label="ClassMark home">
              {% elif user.role == 'lecturer' %}
                <a href="{% url 'users:lecturer_dashboard' %}" class="flex items-center gap-3" aria-label="ClassMark home">
              {% else %}
                <a href="{% url 'home' %}" class="flex items-center gap-3" aria-label="ClassMark home">
              {% endif %}
            {% else %}
              <a href="{% url 'home' %}" class="flex items-center gap-3" aria-label="ClassMark home">
            {% endif %}
              <span class="inline-flex items-center justify-center w-10 h-10 font-semibold text-white bg-indigo-600 rounded-lg">CM</span>
              <span class="text-lg font-semibold">ClassMark</span>
            </a>

            <nav class="hidden gap-3 text-sm md:flex" aria-label="Primary">
              {% if user.is_authenticated %}
                {% if user.role == 'student' %}
                  <a href="{% url 'users:student_dashboard' %}" class="px-3 py-2 rounded hover:bg-slate-100">Home</a>
                {% elif user.role == 'lecturer' %}
                  <a href="{% url 'users:lecturer_dashboard' %}" class="px-3 py-2 rounded hover:bg-slate-100">Home</a>
                {% else %}
                  <a href="{% url 'home' %}" class="px-3 py-2 rounded hover:bg-slate-100">Home</a>
                {% endif %}
              {% else %}
                <a href="{% url 'home' %}" class="px-3 py-2 rounded hover:bg-slate-100">Home</a>
              {% endif %}
              <a href="/about" class="px-3 py-2 rounded hover:bg-slate-100">About</a>
            </nav>
          </div>

          <div class="flex items-center gap-3">
            {% if user.is_authenticated %}
              <a href="{% url 'users:logout' %}" class="items-center hidden px-4 py-2 text-sm bg-white border rounded-md sm:inline-flex text-slate-700 hover:bg-slate-50">Logout</a>
            {% else %}
              <a href="{% url 'users:login' %}" class="items-center hidden px-4 py-2 text-sm text-white bg-indigo-600 rounded-md sm:inline-flex hover:bg-indigo-700">Login</a>
            {% endif %}

            <button id="mobile-menu-button" class="p-2 rounded md:hidden hover:bg-slate-100" aria-label="Toggle menu">
              <svg class="w-6 h-6 text-slate-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8h16M4 16h16"/></svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile nav -->
      <nav id="mobile-menu" class="hidden border-t md:hidden" aria-label="Mobile">
        <div class="px-4 py-3 space-y-1">
          <a href="/" class="block px-3 py-2 rounded hover:bg-slate-100">Home</a>
          <a href="/about" class="block px-3 py-2 rounded hover:bg-slate-100">About</a>
          {% if user.is_authenticated %}
            <a href="{% url 'users:logout' %}" class="block px-3 py-2 rounded hover:bg-slate-100">Logout</a>
          {% else %}
            <a href="{% url 'users:login' %}" class="block px-3 py-2 rounded hover:bg-slate-100">Login</a>
          {% endif %}
        </div>
      </nav>
    </header>

    <!-- Page content -->
    <main class="{% block main_class %}flex-1 w-full max-w-6xl px-4 py-12 mx-auto sm:px-6 lg:px-8 {% endblock main_class %}">
    {% block content %}
      {% block hero %}
      <section class="grid items-center gap-8 md:grid-cols-2">
        <div>
          <h1 class="text-3xl font-extrabold leading-tight sm:text-4xl lg:text-5xl text-slate-900">
            Fast, Secure QR Code Attendance for Universities
          </h1>
          <p class="max-w-xl mt-4 text-slate-600">
            Eliminate proxy attendance and save lecture time with real-time QR check-ins. Simple for students, powerful for lecturers.
          </p>

          <div class="flex flex-wrap gap-3 mt-6">
            {% if user.is_authenticated %}
              {% if user.role == 'student' %}
                <a href="{% url 'users:student_dashboard' %}" class="inline-flex items-center px-5 py-3 text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Go to Dashboard</a>
              {% elif user.role == 'lecturer' %}
                <a href="{% url 'users:lecturer_dashboard' %}" class="inline-flex items-center px-5 py-3 text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Go to Dashboard</a>
              {% else %}
                <a href="{% url 'home' %}" class="inline-flex items-center px-5 py-3 text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Home</a>
              {% endif %}
            {% else %}
              <a href="{% url 'users:login' %}" class="inline-flex items-center px-5 py-3 text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">Login to Continue</a>
            {% endif %}
            <a href="/about" class="inline-flex items-center px-4 py-3 bg-white border rounded-md text-slate-700 hover:bg-slate-50">Learn More</a>
          </div>

          <!-- How it works -->
          <div class="grid gap-4 mt-10 sm:grid-cols-3" aria-label="How it works">
            <div class="p-4 bg-white rounded-lg shadow-sm">
              <div class="flex items-start gap-3">
                <span class="inline-flex items-center justify-center w-10 h-10 font-medium text-indigo-600 rounded-full bg-indigo-50">1</span>
                <div>
                  <h4 class="font-medium">Lecturer creates session</h4>
                  <p class="text-sm text-slate-500">Define time, course and session details.</p>
                </div>
              </div>
            </div>

            <div class="p-4 bg-white rounded-lg shadow-sm">
              <div class="flex items-start gap-3">
                <span class="inline-flex items-center justify-center w-10 h-10 font-medium text-indigo-600 rounded-full bg-indigo-50">2</span>
                <div>
                  <h4 class="font-medium">QR code is generated</h4>
                  <p class="text-sm text-slate-500">Unique, time-limited QR shown on the lecture screen.</p>
                </div>
              </div>
            </div>

            <div class="p-4 bg-white rounded-lg shadow-sm">
              <div class="flex items-start gap-3">
                <span class="inline-flex items-center justify-center w-10 h-10 font-medium text-indigo-600 rounded-full bg-indigo-50">3</span>
                <div>
                  <h4 class="font-medium">Students scan & record</h4>
                  <p class="text-sm text-slate-500">Instant and secure attendance captured.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right column: role cards -->
        <aside class="space-y-4">
          <div class="p-6 bg-white shadow-md rounded-2xl">
            <h3 class="text-lg font-semibold">Student</h3>
            <p class="mt-2 text-sm text-slate-600">Scan QR code, mark attendance, and view your records.</p>
            <div class="mt-4">
              {% if user.is_authenticated and user.role == 'student' %}
                <a href="{% url 'users:student_dashboard' %}" class="inline-flex items-center px-4 py-2 text-sm text-white bg-green-600 rounded-md hover:bg-green-700">Scan Now</a>
              {% else %}
                <a href="{% url 'users:login' %}" class="inline-flex items-center px-4 py-2 text-sm text-white bg-green-600 rounded-md hover:bg-green-700">Scan Now</a>
              {% endif %}
            </div>
          </div>

          <div class="p-6 bg-white shadow-md rounded-2xl">
            <h3 class="text-lg font-semibold">Lecturer</h3>
            <p class="mt-2 text-sm text-slate-600">Create sessions, generate QR codes and view reports.</p>
            <div class="mt-4">
              {% if user.is_authenticated and user.role == 'lecturer' %}
                <a href="{% url 'users:lecturer_dashboard' %}" class="inline-flex items-center px-4 py-2 text-sm text-white bg-indigo-600 rounded-md hover:bg-indigo-700">Create Session</a>
              {% else %}
                <a href="{% url 'users:login' %}" class="inline-flex items-center px-4 py-2 text-sm text-white bg-indigo-600 rounded-md hover:bg-indigo-700">Create Session</a>
              {% endif %}
            </div>
          </div>

          <div class="p-4 text-sm shadow-sm bg-gradient-to-r from-indigo-50 to-emerald-50 rounded-2xl text-slate-700">
            <strong class="block">Why ClassMark?</strong>
            <ul class="mt-2 space-y-1">
              <li class="flex items-start gap-2"><span class="text-green-600">•</span> Prevents proxy attendance</li>
              <li class="flex items-start gap-2"><span class="text-indigo-600">•</span> Saves lecture time</li>
              <li class="flex items-start gap-2"><span class="text-sky-600">•</span> Accurate, real-time records</li>
            </ul>
          </div>
        </aside>
      </section>
      {% endblock hero %}

      {% endblock content %}
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t">
      <div class="max-w-6xl px-4 py-6 mx-auto sm:px-6 lg:px-8">
        <div class="flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center">
          <div>
            <p class="text-sm font-medium text-slate-700">ClassMark</p>
            <p class="text-sm text-slate-500">QR Attendance Management for classrooms and campuses.</p>
          </div>
          <nav class="flex items-center gap-4 text-sm text-slate-600" aria-label="Footer">
            <a href="{% url 'home' %}" class="hover:text-slate-900">Home</a>
            <a href="/about" class="hover:text-slate-900">About</a>
            {% if user.is_authenticated %}
              {% if user.role == 'student' %}
                <a href="{% url 'users:student_dashboard' %}" class="hover:text-slate-900">Dashboard</a>
              {% elif user.role == 'lecturer' %}
                <a href="{% url 'users:lecturer_dashboard' %}" class="hover:text-slate-900">Dashboard</a>
              {% elif user.role == 'admin' %}
                <a href="{% url 'users:admin_dashboard' %}" class="hover:text-slate-900">Dashboard</a>
              {% endif %}
            {% else %}
              <a href="{% url 'users:login' %}" class="hover:text-slate-900">Login</a>
            {% endif %}
          </nav>
        </div>
        <div class="pt-4 mt-4 text-sm border-t text-slate-500 border-slate-200">
          &copy; {% now "Y" %} Khaey. All rights reserved.
        </div>
      </div>
    </footer>

    {% endblock body %}
  </body>


    <!-- JavaScript -->
    <script src="{% static 'js/base.js' %}"></script>
    {% block scripts %}{% endblock %}
</html>
